<div class = 'wrapper' *ngIf = 'this.listaOrdensForn; else carregando'>

    <div class = 'title px-5 py-5' *ngIf = 'this.listaOrdensForn.length > 0; else naoHaOfs'>
        <mat-card>
            <mat-card-title>              
                <h4>
                    Ordens de Fornecimento Concluídas
                </h4>           
            </mat-card-title>
            
            <mat-card-content class = 'mt-4'>
                <table mat-table [dataSource]="this.dataSource" class="mat-elevation-z8 table-width">
                  
                    <ng-container matColumnDef="num_of">
                      <th mat-header-cell *matHeaderCellDef> Número da OF </th>
                      <td mat-cell *matCellDef="let element"> {{element.num_of}} </td>
                    </ng-container>                  
                   
                    <ng-container matColumnDef="referencia">
                      <th mat-header-cell *matHeaderCellDef> Referência </th>
                      <td mat-cell *matCellDef="let element"> {{element.referencia | mask: "00/0000"}} </td>
                    </ng-container>          
                    
                    <ng-container matColumnDef="sigla">
                        <th class = 'pr-3' mat-header-cell *matHeaderCellDef> Sigla </th>
                        <td class = 'pr-3' mat-cell *matCellDef="let element"> {{element.sigla}} </td>
                    </ng-container>  
                  
                    <ng-container matColumnDef="responsavel_t">
                      <th mat-header-cell *matHeaderCellDef> Responsável Técnico </th>
                      <td mat-cell *matCellDef="let element"> {{element.responsavel_t | titlecase}} </td>
                    </ng-container>                  
                    
                    <ng-container matColumnDef="gerente_t">
                      <th mat-header-cell *matHeaderCellDef> Gerente Técnico </th>
                      <td mat-cell *matCellDef="let element"> {{element.gerente_t | titlecase}} </td>
                    </ng-container>

                    <ng-container matColumnDef="usti_bb">
                        <th class = 'pr-3' mat-header-cell *matHeaderCellDef> USTI BB </th>
                        <td class = 'pr-3' mat-cell *matCellDef="let element"> {{element.ustibb}} </td>
                    </ng-container>

                    <ng-container matColumnDef="valor">
                        <th mat-header-cell *matHeaderCellDef> Valor </th>
                        <td mat-cell *matCellDef="let element"> {{element.valor | currency : 'BRL' : 'symbol'}} </td>
                    </ng-container>                          

                    <tr mat-header-row *matHeaderRowDef="this.colunas"></tr>
                    <tr 
                      mat-row 
                      *matRowDef="let row; columns: this.colunas;" 
                      [routerLink] = '["/relatorios/ordem-fornecimento/" + row.idOf]'>
                    </tr>         
                </table>
            
            </mat-card-content>

        </mat-card>

    </div>
    
    <ng-template #naoHaOfs>
      <div class = 'alert alert-warning'>
        Não há Ordens de Fornecimento concluídas
      </div>  
    </ng-template>

</div>

<ng-template #carregando>
  <div class = 'wrapper d-flex justify-content-center align-items-center'>
    
    <i class="fa fa-refresh fa-spin fa-5x" aria-hidden="true"></i>

  </div>
</ng-template>