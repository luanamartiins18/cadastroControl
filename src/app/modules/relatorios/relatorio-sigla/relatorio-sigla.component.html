<div class = 'wrapper' *ngIf = 'this.relatorio; else carregando'>

    <div class = 'title px-5 py-5'>
        <mat-card class = 'px-4'>
            <mat-card-title class = 'mb-3'>  

                <h4>
                    Relatório por Sigla/Referência
                </h4>            
                
            </mat-card-title>
            
            <mat-card-content class = 'mt-4 card mat-elevation-z8'>
                <div class = 'card-header'>                          
                    <div class = 'form-row mb-0'>
                        <div class = 'form-group col-sm-3 mb-0 mr-3'>
                            <label class = 'mb-0' for="referencia"><h6>Referência</h6></label>
                            <div class = 'input-group'>
                                <input 
                                    (keyup.enter) = 'this.filtraRelatorio();'
                                    [(ngModel)] = 'this.filtroReferencia'
                                    mask="00/0000" 
                                    type="text" 
                                    class = 'input-group-prepend form-control form-control-sm' 
                                    placeholder='mes/ano' 
                                    id = 'referencia'/>
                                <div class="input-group-append">
                                    <button 
                                        (click) = 'this.filtraRelatorio();'
                                        class="btn btn-sm btn-secondary" 
                                        type="button">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </button>
                                </div>                                
                            </div>
                            <small class = 'cursor-pointer' (click) = 'this.resetaRelatorio();'>Resetar Formulário</small>                           
                        </div>
                    </div>
                </div>
                <div class = 'card-body px-0 py-0'>   

                    <table mat-table [dataSource]="this.relatorio">
                  
                        <ng-container matColumnDef="numero_of">
                          <th mat-header-cell *matHeaderCellDef> Número da OF </th>
                          <td mat-cell *matCellDef="let element"> {{element.numero_of}} </td>
                        </ng-container>  

                        <ng-container matColumnDef="colaborador">
                            <th mat-header-cell *matHeaderCellDef> Colaborador </th>
                            <td mat-cell *matCellDef="let element"> {{element.colaborador | titlecase}} </td>
                        </ng-container>

                        <ng-container matColumnDef="status_of">
                          <th mat-header-cell *matHeaderCellDef> Status </th>
                          <td mat-cell *matCellDef="let element"> {{element.status_of}} </td>
                        </ng-container>

                        <ng-container matColumnDef="valor_ustibb">
                            <th mat-header-cell *matHeaderCellDef> Valor UstiBB </th>
                            <td mat-cell *matCellDef="let element"> {{element.valor_ustibb}} </td>
                        </ng-container>

                        <ng-container matColumnDef="valor">
                            <th mat-header-cell *matHeaderCellDef> Valor </th>
                            <td mat-cell *matCellDef="let element"> {{element.valor}} </td>
                        </ng-container>
                        <ng-container matColumnDef="referencia">
                            <th mat-header-cell *matHeaderCellDef> Referência </th>
                            <td mat-cell *matCellDef="let element"> {{element.referencia | mask: "00/0000"}} </td>
                        </ng-container>
                        <ng-container matColumnDef="sigla">
                            <th mat-header-cell *matHeaderCellDef> Sigla </th>
                            <td mat-cell *matCellDef="let element"> {{element.sigla}} </td>
                        </ng-container>
                        
                        
    
                        <tr mat-header-row *matHeaderRowDef="this.colunas"></tr>
                        <tr mat-row *matRowDef="let row; columns: this.colunas;"></tr>         
                    </table>
                </div>
                

                

            </mat-card-content>
            
    
        </mat-card>
        
    </div>  

</div>

<ng-template #carregando>
  <div class = 'wrapper d-flex justify-content-center align-items-center'>
    
    <i class="fa fa-refresh fa-spin fa-5x" aria-hidden="true"></i>

  </div>
</ng-template>
